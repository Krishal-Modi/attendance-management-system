<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Document</title>

    <style>
        .contentheading {
            text-align: center;
            font-size: 40px;
            margin: 2% 0% 2% 0%;
        }

        .manual {
            font-size: 18px;
            gap: 20px;
            margin: 0% 0% 0% 0%;
        }

        .nav-elements {
            color: black;
            text-decoration: none;
        }


        .fields {
            display: flex;
            flex-direction: rows;
            gap: 20%;
            margin: 0% 15% 0% 15%;
        }

        .fields>input,
        select {
            width: 30%;
            height: 40px;
            border-radius: 5px;
            border: 1px solid black;
            padding: 5px;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 40px;
            margin: 0% 0% 0% 0%;
        }

        button {
            width: 30%;
            height: 40px;
            border-radius: 5px;
            border: 1px solid black;
            padding: 5px;
            background-color: #007bff;
            color: white;
            font-size: 20px;
            margin: 0% 35% 0% 35%;
        }

        /* Table */
        #student-list>h2 {
            margin: 0% 10% 3% 10%;
            text-align: center;
        }

        table {
            width: 80%;
            margin: 0% 10% 0% 10%;
            border-collapse: collapse;
            color: black;
        }

        tbody {
            background-color: #f5f5f5;
        }

        th,
        td {
            border: 2px solid black;
            text-align: center;
            font-size: 20px;
            padding: 10px;
        }

        input[type="radio"] {
            margin: 0% 5% 0% 5%;
        }

        .submit {
            width: 30%;
            height: 40px;
            border-radius: 5px;
            border: 1px solid black;
            padding: 5px;
            background-color: #007bff;
            color: white;
            font-size: 20px;
            margin: 0% 35% 0% 35%;
        }
    </style>
    {% load custom_filters %}
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="/index/" style="margin-left: 6%; font-size: 30px;">Horizon Crest
                University</a>
            <div class="collapse navbar-collapse" id="navbarText">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 manual" style="margin-left: 75%; font-size: 18px;">
                    {% if request.user.is_authenticated %}
                    <li>
                        <a class="user-info-text nav-elements" style="color: black; white-space: nowrap;">Prof. {{ user.username }}</a>
                    </li>
                    {% else %}
                    <li>
                        <a class="user-info-text nav-elements" style="color: black; white-space: nowrap;"></a>
                    </li>
                    {% endif %}
                    <li>
                        <form class="" role="search">
                            <!-- Code for admin panel -->
                            {% if request.user.is_authenticated %}
                            <a class="nav-elements" href="/logout/" type="submit">Logout</a>
                            {% else %}
                            <a class="nav-elements" href="/login/" type="submit">Login</a>
                            {% endif %}
                        </form>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Body -->



    <!-- Student Attendance Table -->
    <div id="student-list">
        <h2>Student List</h2>
        <table>
            <thead>
                <tr>
                    <th>Roll Number</th>
                    <th>Name</th>
                    {% for date in distinct_dates %}
                        <th>{{ date }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                    <tr>
                        <td>{{ student.roll_number }}</td>
                        <td>{{ student.name }}</td>
                        {% for date in distinct_dates %}
                            <td>
                                {% with attendance=student_attendance|get_item:student.id %}
                                    {% if attendance and date in attendance %}
                                        {{ attendance|get_item:date }}
                                    {% else %}
                                        <!-- If no attendance record exists for this date, show "Not Recorded" -->
                                        Not Recorded
                                    {% endif %}
                                {% endwith %}
                            </td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    


</body>

</html>

























































<!--

<div id="student-list">
        <h2>Student List</h2>
        <table>
            <thead>
                <tr>
                    <th>Roll Number</th>
                    <th>Name</th>
                    {% for date in distinct_dates %}
                    <th>{{ date }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td>{{ student.roll_number }}</td>
                    <td>{{ student.name }}</td>
                    {% for date in distinct_dates %}
                    <td>
                        {% if student_attendance.student.id.date %}
                        {{ student_attendance.student.id.date }}
                        {% else %}
                        {% for student in students %}
                            {{ student_attendance.student.id.date }}
                        {% endfor %}

                        {% endif %}
                    </td>
                    {% endfor %}
                </tr>
                {% endfor %}

            </tbody>
        </table>
    </div>
-->